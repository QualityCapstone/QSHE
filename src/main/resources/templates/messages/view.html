<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="partials/layout :: header">
    <meta charset="UTF-8" />
    <title>Home</title>
</head>
<body sec:authorize="isAuthenticated()" class="message-body">
<div th:replace="partials/layout :: navbar" />
<div th:replace="partials/layout :: navbar-profile" />


<div class="bg-white m-auto text-center rounded message-header">
    <h1><img class="message-md-avatar" th:src="@{~/uploads/} + ${recipient.profile.uploadPath}"> <span th:text="${recipient.profile.firstName}"></span>  </h1>



</div>

    <div class="message-conversation text-center mx-auto">



        <!--Message Center -->
    <div class="p-5 m-2 text-dark" th:each="message: ${messages}" th:height="auto">
        <ul class="list-unstyled">
            <li class="media">
            <div class=" col-12">
                <div class=" d-flex flex-wrap p-2">
                    <div class="col-3 float-left">
                    <p class="float-left m-5">From: <span  class="text-justify " th:text="${message.sender.username}"></span></p>
                    <p class="float-left m-5">To: <span class="text-justify " th:text="${message.recipient.username}"></span></p>
                    </div>
                    <div class="col-6 float-right bubble-message">
                    <p class="text-justify" th:text="${message.message}"></p>
                    <div class="mediumBubble"></div>
                    <div class="smallBubble"></div>
                    </div>
                </div>
            </div>
            </li>
        </ul>
    </div>

</div>


<!--Response Center -->
<div class="profile-footer mx-auto">
    <form th:action="@{~/messages/create}" method="post">
        <div class="form-row text-center">
            <div class="form-group col-md-6">
              <input type="text"  class="message-send" id="message" name="message" th:placeholder="'Message ' + ${recipient.profile.firstName}"/>
             </div>
            <div class="form-group">
               <input type="hidden"  name="recipient-id" th:value="${recipient.id}">
               <button type="submit" class="btn btn-primary">Send</button>
           </div>

        </div>
    </form>
</div>


<div th:replace="partials/layout :: footer" />

</body>
</html>
